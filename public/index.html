<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<body>
  <script>
    if ('geolocation' in navigator) {
      navigator.geolocation.getCurrentPosition(async position => {

        // Get longitude and latitude from navigator
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;
        // Match longitude and latitude to lon and lat span tags
        document.getElementById('latitude').textContent = latitude;
        document.getElementById('longitude').textContent = longitude;

        // Create Post request
        const data = { latitude, longitude };
        const options = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        };

        const response = await fetch('/api', options);
        const json = await response.json();
        console.log(json);
      });
    }
    else {
      console.log("location not available")
    }
  </script>

  <h1>Data Selfie App</h1>
  <p>
    latitude: <span id='latitude'></span>&deg;</br>
    longitude: <span id='longitude'></span>&deg;
  </p>
</body>

</html>